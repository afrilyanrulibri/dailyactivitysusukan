<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Daily Activity Susukan - Kaunit</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f5f8fa;
    margin: 0;
    padding: 0;
  }
  header {
    background: #0056A0;
    color: white;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  header img {
    width: 32px;
    height: 32px;
  }
  h1 {
    margin: 0;
    font-size: 18px;
  }
  main {
    max-width: 500px;
    margin: 20px auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  }
  label {
    font-weight: 600;
    display: block;
    margin-top: 12px;
    margin-bottom: 4px;
  }
  input, select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
  }
  button {
    margin-top: 16px;
    width: 100%;
    background: #0056A0;
    color: white;
    border: none;
    padding: 12px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover {
    background: #004080;
  }
  #toast {
    visibility: hidden;
    min-width: 200px;
    margin-left: -100px;
    background-color: #333;
    color: white;
    text-align: center;
    border-radius: 6px;
    padding: 12px;
    position: fixed;
    z-index: 1;
    left: 50%;
    bottom: 30px;
    font-size: 14px;
  }
  #toast.show {
    visibility: visible;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }
  @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
  @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
</style>
</head>
<body>

<header>
  <img src="Brimo Samping.png" alt="Logo BRIMO">
  <h1>Input Activity - Kaunit</h1>
</header>

<main>
  <label>Nama Mantri</label>
  <select id="mantri">
    <option value="">-- Pilih --</option>
    <option>156802 EKOWATI CAHYANINGROM</option>
    <option>189290 MEGA BAGUS KURNIAWAN ABADI</option>
    <option>189417 DEDDY NOVIYANTO B.S</option>
    <option>213122 RISKA AGUSTIANA</option>
    <option>270609 SULISTIYO RINI</option>
    <option>288133 GALIH RIO PAMBUDI</option>
  </select>

  <label>NIK Nasabah</label>
  <input type="text" id="nik" placeholder="Masukkan NIK">

  <label>Nama Nasabah</label>
  <input type="text" id="nasabah" placeholder="Masukkan nama nasabah">

  <label>Nomor Brimen Berkas</label>
  <input type="text" id="brimen" placeholder="Masukkan nomor Brimen">

  <button onclick="submitForm()">Simpan Data</button>
</main>

<div id="toast"></div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzGa3NPrKyOy_gZLDgMAN3F9XfsMlg4styre1KfzqYAR9gLVpJgc8gxVQtimE6p9r9O/exec";

function showToast(msg) {
  const toast = document.getElementById("toast");
  toast.innerText = msg;
  toast.className = "show";
  setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
}

function submitForm() {
  const mantri = document.getElementById("mantri").value.trim();
  const nik = document.getElementById("nik").value.trim();
  const nasabah = document.getElementById("nasabah").value.trim();
  const brim = document.getElementById("brimen").value.trim();

  if (!mantri || !nik || !nasabah || !brim) {
    showToast("⚠️ Semua field wajib diisi");
    return;
  }

  const payload = { action: "save_kaunit", mantri, nik, nasabah, nomorBrimen: brim };
  console.log("Sending:", payload);

  fetch(WEB_APP_URL, {
    method: "POST",
    body: new URLSearchParams(payload)
  })
  .then(res => res.json())
  .then(j => {
    console.log("Response:", j);
    if (j.status === "sukses") {
      showToast("✅ Data tersimpan");
      document.getElementById("nik").value = "";
      document.getElementById("nasabah").value = "";
      document.getElementById("brimen").value = "";
    } else {
      showToast("❌ Gagal simpan: " + (j.error || "unknown"));
    }
  })
  .catch(err => {
    console.error(err);
    showToast("❌ Error koneksi");
  });
}
</script>

</body>
</html>
